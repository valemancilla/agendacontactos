<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap/bootstrap.css">
    <title>Test de Botones</title>
</head>
<body>
    <div class="container mt-5">
        <h1>Test de Funcionalidad de Botones</h1>
        
        <div class="card mt-3">
            <div class="card-header">
                Test de Botones <span class="badge rounded-pill text-bg-primary" id="idView"></span>
            </div>
            <div class="card-body">
                <form id="frmDataCountry">
                    <div class="row">
                        <div class="col">
                            <label for="name" class="form-label">Nombre del Pa√≠s</label>
                            <input type="text" class="form-control" id="name" name="name" value="Pa√≠s de Prueba">
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col">
                            <div class="container mt-4 text-center">
                                <a href="#" class="btn btn-primary" id="btnNuevo" data-ed='[["#btnGuardar","#btnCancelar"],["#btnNuevo","#btnEditar","#btnEliminar"]]'>Nuevo</a>
                                <a href="#" class="btn btn-dark" id="btnCancelar" data-ed='[["#btnNuevo"],["#btnGuardar","#btnEditar","#btnEliminar","#btnCancelar"]]'>Cancelar</a>
                                <a href="#" class="btn btn-success" id="btnGuardar" data-ed='[["#btnEditar","#btnCancelar","#btnNuevo","#btnEliminar"],["#btnGuardar"]]'>Guardar</a>
                                <a href="#" class="btn btn-warning" id="btnEditar" data-ed='[["#btnGuardar","#btnCancelar"],["#btnNuevo","#btnEliminar"]]'>Editar</a>
                                <a href="#" class="btn btn-danger" id="btnEliminar" data-ed='[["#btnNuevo"],["#btnGuardar","#btnEditar","#btnEliminar","#btnCancelar"]]'>Eliminar</a>
                            </div>
                        </div>
                    </div> 
                </form>
            </div>
        </div>
        
        <div class="mt-3">
            <h3>Logs de Depuraci√≥n:</h3>
            <div id="logs" style="background: #f8f9fa; padding: 10px; border-radius: 5px; font-family: monospace; max-height: 300px; overflow-y: auto;"></div>
        </div>
    </div>

    <script>
        // Funci√≥n para agregar logs
        function addLog(message) {
            const logs = document.getElementById('logs');
            const time = new Date().toLocaleTimeString();
            logs.innerHTML += `[${time}] ${message}<br>`;
            logs.scrollTop = logs.scrollHeight;
        }

        // Funci√≥n ctrlBtn
        function ctrlBtn(e) {
            let data = JSON.parse(e);
            addLog(`üîß Activando botones: ${JSON.stringify(data[0])}`);
            addLog(`üîß Desactivando botones: ${JSON.stringify(data[1])}`);
            
            data[0].forEach(boton => {
                let btnActual = document.querySelector(boton);
                if (btnActual) {
                    btnActual.classList.remove('disabled');
                    btnActual.removeAttribute('disabled');
                    addLog(`‚úÖ Activado: ${boton}`);
                } else {
                    addLog(`‚ùå No encontrado: ${boton}`);
                }
            });
            data[1].forEach(boton => {
                let btnActual = document.querySelector(boton);
                if (btnActual) {
                    btnActual.classList.add('disabled');
                    btnActual.setAttribute('disabled', 'disabled');
                    addLog(`‚ùå Desactivado: ${boton}`);
                } else {
                    addLog(`‚ùå No encontrado: ${boton}`);
                }
            });
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            addLog('üöÄ P√°gina cargada');
            
            // Bot√≥n Editar
            document.querySelector('#btnEditar').addEventListener("click", (e) => {
                addLog('üñ±Ô∏è Bot√≥n Editar clickeado');
                addLog(`üìã Data-ed: ${e.target.dataset.ed}`);
                
                ctrlBtn(e.target.dataset.ed);
                
                e.stopImmediatePropagation();
                e.preventDefault();        
            });

            // Bot√≥n Nuevo
            document.querySelector('#btnNuevo').addEventListener("click", (e) => {
                addLog('üñ±Ô∏è Bot√≥n Nuevo clickeado');
                ctrlBtn(e.target.dataset.ed);
                e.stopImmediatePropagation();
                e.preventDefault();        
            });

            // Bot√≥n Cancelar
            document.querySelector('#btnCancelar').addEventListener("click", (e) => {
                addLog('üñ±Ô∏è Bot√≥n Cancelar clickeado');
                ctrlBtn(e.target.dataset.ed);
                e.stopImmediatePropagation();
                e.preventDefault();        
            });

            // Inicializar estado de botones
            document.querySelectorAll(".btn").forEach((val, id) => {
                ctrlBtn(val.dataset.ed);
            });
        });
    </script>
</body>
</html>
